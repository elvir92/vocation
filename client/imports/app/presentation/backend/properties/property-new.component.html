<div fxLayout="column" class="components-container-gt-xs" [ngClass.xs]="'components-container-xs'" fxLayoutGap="20px">
    <div fxFlex class="stepper-component-holder mat-elevation-z4">
        <mat-toolbar class="stepper-header">
            <h1 class="mat-headline center-align">New Property</h1>
        </mat-toolbar>

        <div class="stepper-container">

            <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">
                <div fxFlex.xs="100" fxFlex.lg="100" fxFlex.md="50" fxFlex.sm="50">

                    <form [formGroup]="propertyForm">
                        <mat-horizontal-stepper [linear]="isLinear">
                            <mat-step [stepControl]="property.location.latitude && property.location.longitude">
                                <ng-template matStepLabel>Location</ng-template>
                                <app-location (onChange)="onChangeLocation($event)"></app-location>
                                <h5>Longitude : {{property.location.longitude}} Latitude
                                    : {{property.location.latitude}}</h5>

                                <mat-divider></mat-divider>

                                <div fxLayoutAlign="end">
                                    <button mat-button matStepperNext (click)="addOrSaveProperty()">
                                        Next
                                        <mat-icon>navigate_next</mat-icon>
                                    </button>
                                </div>

                            </mat-step>
                            <mat-step>
                                <ng-template matStepLabel>Places</ng-template>
                                <app-place
                                        *ngFor="let placeForm of propertyForm.controls.places.controls; let i=index"
                                        [group]="placeForm" [lengthUnits]="lengthUnits"
                                        [place]="places[i]"></app-place>

                                <mat-divider></mat-divider>

                                <div>
                                    <button mat-button matStepperPrevious>
                                        <mat-icon>navigate_before</mat-icon>
                                        Back
                                    </button>
                                </div>
                                <div fxLayoutAlign="end">
                                    <button mat-button matStepperNext (click)="addOrSaveProperty()">
                                        Next
                                        <mat-icon>navigate_next</mat-icon>
                                    </button>
                                </div>
                            </mat-step>
                            <mat-step>
                                <ng-template matStepLabel>Activities</ng-template>
                                <div class="col-xs-12" *ngFor="let list of listing | async">
                                    <h2 class="page-header"> {{list.listGroup.title[0].text}}</h2>
                                    <div class="property-amenities">
                                        <div *ngFor="let item of list.lists">
                                            <label>
                                                <input type="checkbox"
                                                       (change)="onChangeList(item, $event.target.checked)">
                                                {{item.title[0].text}}
                                            </label>
                                            <br>
                                        </div>
                                    </div>
                                </div>

                                <mat-divider></mat-divider>

                                <div>
                                    <button mat-button matStepperPrevious>
                                        <mat-icon>navigate_before</mat-icon>
                                        Back
                                    </button>
                                </div>
                                <div fxLayoutAlign="end">
                                    <button mat-button matStepperNext (click)="addOrSaveProperty()">
                                        Next
                                        <mat-icon>navigate_next</mat-icon>
                                    </button>
                                </div>
                            </mat-step>
                            <mat-step [stepControl]="propertyForm.value.propertyName">
                                <ng-template matStepLabel>Descriptions</ng-template>
                                <div class="form-group">
                                    <label class="col-lg-2 m-t-10" for="inputPropName">Property name</label>
                                    <div class="col-lg-10 m-t-10">
                                        <input class="form-control" type="text" id="inputPropName"
                                               placeholder="Property name"
                                               formControlName="propertyName">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-lg-2 m-t-10" for="inputPropHeadline">Property headline</label>
                                    <div class="col-lg-10 m-t-10">
                                        <input class="form-control" type="text" id="inputPropHeadline"
                                               placeholder="Property headline"
                                               formControlName="propertyHeadline">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-lg-2 m-t-10" for="inputSummary">Property summary</label>
                                    <div class="col-lg-10 m-t-10">
                        <textarea class="form-control" id="inputSummary" rows="3"
                                  formControlName="propertySummary"></textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-lg-2 m-t-10" for="inputPropDescription">Property
                                        description</label>
                                    <div class="col-lg-10 m-t-10">
                        <textarea class="form-control" id="inputPropDescription" cols="30" rows="10"
                                  placeholder="Property description"
                                  formControlName="propertyDescription"></textarea>
                                    </div>
                                </div>

                                <mat-divider></mat-divider>

                                <div>
                                    <button mat-button matStepperPrevious>
                                        <mat-icon>navigate_before</mat-icon>
                                        Back
                                    </button>
                                </div>
                                <div fxLayoutAlign="end">
                                    <button mat-button matStepperNext (click)="addOrSaveProperty()">
                                        Next
                                        <mat-icon>navigate_next</mat-icon>
                                    </button>
                                </div>
                            </mat-step>
                            <mat-step>
                                <ng-template matStepLabel>Photos</ng-template>
                                <h1>Pictures</h1>
                                <app-picture-upload (onFile)="onImage($event)"></app-picture-upload>
                                <h1 class="page-header">Uploaded pictures</h1>

                                <div class="gallery">

                                    <div class="col-sm-2 col-xs-12" *ngFor="let item of pictures | async">
                                        <div class="gallery-item">
                                            <div class="gallery-image">
                                                <img [src]="item.url" [alt]="item.name"/>
                                            </div><!-- /.gallery-image -->

                                            <div class="gallery-caption">
                                                <a href="javascript:;"
                                                   (click)="deletePicture(item)"
                                                   class="btn-alert">Delete</a>
                                            </div><!-- /.gallery-caption -->
                                        </div><!-- /.gallery-item -->
                                    </div>
                                </div>

                                <mat-divider></mat-divider>

                                <div>
                                    <button mat-button matStepperPrevious>
                                        <mat-icon>navigate_before</mat-icon>
                                        Back
                                    </button>
                                </div>
                                <div fxLayoutAlign="end">
                                    <button mat-button (click)="saveProperty()">
                                        Done
                                        <mat-icon>done</mat-icon>
                                    </button>
                                </div>
                            </mat-step>
                        </mat-horizontal-stepper>
                    </form>
                </div>

            </div>

        </div>

    </div>
</div>