<div fxLayout="column" class="components-container-gt-xs" [ngClass.xs]="'components-container-xs'" fxLayoutGap="20px">
    <div fxFlex class="stepper-component-holder mat-elevation-z4">
        <mat-toolbar class="stepper-header">
            <h1 class="mat-headline center-align">New Property</h1>
        </mat-toolbar>

        <div class="stepper-container">
            <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">
                <div fxFlex.xs="100">
                    <mat-horizontal-stepper [linear]="isLinear">
                        <!--location stepp-->
                        <mat-step [stepControl]="locationValidation">
                            <ng-template matStepLabel>Location</ng-template>

                            <mat-divider></mat-divider>


                            <app-location (onChange)="onChangeLocation($event)"></app-location>
                            <h5>Longitude : {{property.geoLocation.longitude}} Latitude
                                : {{property.geoLocation.latitude}}</h5>

                            <mat-divider></mat-divider>

                            <div fxLayoutAlign="end">
                                <button mat-button matStepperNext (click)="addOrSaveProperty()">
                                    Next
                                    <mat-icon>navigate_next</mat-icon>
                                </button>
                            </div>

                        </mat-step>
                        <!--Pricing-->
                        <mat-step>
                            <ng-template matStepLabel>Pricing</ng-template>
                            <!--From date-->
                            <!--End date-->
                            <!--price-->

                            <mat-form-field>
                                <input matInput [formControl]="basePrice" id="basePrice" placeholder="Base price"
                                    autocorrect="off" autocapitalize="off" spellcheck="off" type="text">
                            </mat-form-field>

                            <br>

                            <mat-form-field>
                                <input matInput [formControl]="periodName" id="periodName" placeholder="Period name"
                                    autocorrect="off" autocapitalize="off" spellcheck="off" type="text">
                            </mat-form-field>

                            <mat-form-field>
                                <input matInput [formControl]="startPricePeriod" [matDatepicker]="picker1" placeholder="Start">
                                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                <mat-datepicker #picker1></mat-datepicker>
                            </mat-form-field>


                            <mat-form-field>
                                <input matInput [formControl]="endPricePeriod" [matDatepicker]="picker2" placeholder="End">
                                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                                <mat-datepicker #picker2></mat-datepicker>
                            </mat-form-field>

                            <mat-form-field>
                                <input matInput [formControl]="valuePricePeriod" id="valuePricePeriod" placeholder="Value"
                                    autocorrect="off" autocapitalize="off" spellcheck="off" type="text">
                            </mat-form-field>

                            <button mat-button style="float:right" (click)="addNewPeriodPrice()">
                                <mat-icon>plus</mat-icon>
                                Add price
                            </button>

                            <mat-divider></mat-divider>

                            <div fxLayout="column">
                                <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px" *ngFor="let price of pricing">
                                    <div fxFlex.xs="100" fxFlex.lg="40" fxFlex.md="40" fxFlex.sm="20">
                                        <b>{{price.name}}</b>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex.lg="40" fxFlex.md="40" fxFlex.sm="20">
                                        <b>{{price.start | date:"dd/MM/yyyy"}}</b>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex.lg="40" fxFlex.md="40" fxFlex.sm="20">
                                        <b>{{price.end | date:"dd/MM/yyyy"}}</b>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex.lg="40" fxFlex.md="40" fxFlex.sm="20">
                                        <b>{{price.value}}</b>
                                    </div>
                                    <div fxFlex.xs="100" fxFlex.lg="40" fxFlex.md="40" fxFlex.sm="20">
                                        <mat-icon (click)="removePrice(price)">close</mat-icon>
                                    </div>
                                </div>
                            </div>


                            <mat-divider></mat-divider>

                            <div fxLayout="row">
                                <div fxLayout="row" fxFlex="50" fxLayoutAlign="start center">
                                    <button mat-button matStepperPrevious>
                                        <mat-icon>navigate_before</mat-icon>
                                        Back
                                    </button>
                                </div>

                                <div fxLayout="row" fxFlex="50" fxLayoutAlign="end center">
                                    <div fxLayoutAlign="end">
                                        <button mat-button matStepperNext (click)="addOrSaveProperty()">
                                            Next
                                            <mat-icon>navigate_next</mat-icon>
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </mat-step>

                        <!--Places step-->
                        <mat-step>
                            <form [formGroup]="propertyForm">
                                <ng-template matStepLabel>Places</ng-template>

                                <mat-divider></mat-divider>

                                <app-place *ngFor="let placeForm of propertyForm.controls.places.controls; let i=index"
                                    [group]="placeForm" [lengthUnits]="lengthUnits" [place]="places[i]"></app-place>

                                <mat-divider></mat-divider>

                                <div fxLayout="row">
                                    <div fxLayout="row" fxFlex="50" fxLayoutAlign="start center">
                                        <button mat-button matStepperPrevious>
                                            <mat-icon>navigate_before</mat-icon>
                                            Back
                                        </button>
                                    </div>

                                    <div fxLayout="row" fxFlex="50" fxLayoutAlign="end center">
                                        <div fxLayoutAlign="end">
                                            <button mat-button matStepperNext (click)="addOrSaveProperty()">
                                                Next
                                                <mat-icon>navigate_next</mat-icon>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>

                        </mat-step>
                        <!--Activities step-->
                        <mat-step>
                            <ng-template matStepLabel>Activities</ng-template>
                            <div class="col-xs-12" *ngFor="let list of listing | async">
                                <h2 class="page-header"> {{list.listGroup.title[0].text}}</h2>
                                <div class="property-amenities">
                                    <div *ngFor="let item of list.lists">
                                        <label>
                                            <input type="checkbox" (change)="onChangeList(item, $event.target.checked)">
                                            {{item.title[0].text}}
                                        </label>
                                        <br>
                                    </div>
                                </div>
                            </div>

                            <mat-divider></mat-divider>

                            <div fxLayout="row">
                                <div fxLayout="row" fxFlex="50" fxLayoutAlign="start center">
                                    <button mat-button matStepperPrevious>
                                        <mat-icon>navigate_before</mat-icon>
                                        Back
                                    </button>
                                </div>

                                <div fxLayout="row" fxFlex="50" fxLayoutAlign="end center">
                                    <div fxLayoutAlign="end">
                                        <button mat-button matStepperNext (click)="addOrSaveProperty()">
                                            Next
                                            <mat-icon>navigate_next</mat-icon>
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </mat-step>
                        <!--Descriptions-->
                        <mat-step [stepControl]="descriptionForm">
                            <form [formGroup]="descriptionForm">
                                <ng-template matStepLabel>Descriptions</ng-template>
                                <mat-form-field class="full-width">
                                    <input matInput id="inputPropName" placeholder="Property name" autocorrect="off"
                                        autocapitalize="off" spellcheck="off" type="text" required formControlName="propertyName">
                                    <mat-error *ngIf="descriptionForm.controls['propertyName'].invalid">This field is
                                        required!
                                    </mat-error>
                                </mat-form-field>

                                <mat-form-field class="full-width">
                                    <input matInput id="inputPropHeadline" placeholder="Property headline" autocorrect="off"
                                        autocapitalize="off" spellcheck="off" type="text" required formControlName="propertyHeadline">
                                    <mat-error *ngIf="descriptionForm.controls['propertyHeadline'].invalid">This field
                                        is required!
                                    </mat-error>
                                </mat-form-field>

                                <mat-form-field class="full-width">
                                    <textarea matInput id="inputSummary" placeholder="Property summary"
                                        matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="6" required
                                        formControlName="propertySummary"></textarea>
                                    <mat-error *ngIf="descriptionForm.controls['propertySummary'].invalid">This field
                                        is
                                        required!
                                    </mat-error>
                                </mat-form-field>

                                <mat-form-field class="full-width">
                                    <textarea matInput id="inputPropDescription" placeholder="Property description"
                                        matTextareaAutosize matAutosizeMinRows="10" matAutosizeMaxRows="30" required
                                        formControlName="propertyDescription"></textarea>
                                    <mat-error *ngIf="descriptionForm.controls['propertyDescription'].invalid">This
                                        field is required!
                                    </mat-error>
                                </mat-form-field>

                                <mat-divider></mat-divider>

                                <div fxLayout="row">
                                    <div fxLayout="row" fxFlex="50" fxLayoutAlign="start center">
                                        <button mat-button matStepperPrevious>
                                            <mat-icon>navigate_before</mat-icon>
                                            Back
                                        </button>
                                    </div>

                                    <div fxLayout="row" fxFlex="50" fxLayoutAlign="end center">
                                        <div fxLayoutAlign="end">
                                            <button mat-button matStepperNext (click)="addOrSaveProperty()">
                                                Next
                                                <mat-icon>navigate_next</mat-icon>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                            </form>
                        </mat-step>
                        <!--Photos-->
                        <mat-step>
                            <ng-template matStepLabel>Photos</ng-template>
                            <h1>Pictures</h1>
                            <app-picture-upload (onFile)="onImage($event)"></app-picture-upload>
                            <h1 class="page-header">Uploaded pictures</h1>

                            <div class="gallery">

                                <div class="col-sm-2 col-xs-12" *ngFor="let item of pictures | async">
                                    <div class="gallery-item">
                                        <div class="gallery-image">
                                            <img [src]="item.url" [alt]="item.name" />
                                        </div><!-- /.gallery-image -->

                                        <div class="gallery-caption">
                                            <a href="javascript:;" (click)="deletePicture(item)" class="btn-alert">Delete</a>
                                        </div><!-- /.gallery-caption -->
                                    </div><!-- /.gallery-item -->
                                </div>
                            </div>

                            <mat-divider></mat-divider>


                            <div fxLayout="row">
                                <div fxLayout="row" fxFlex="50" fxLayoutAlign="start center">
                                    <button mat-button matStepperPrevious>
                                        <mat-icon>navigate_before</mat-icon>
                                        Back
                                    </button>
                                </div>

                                <div fxLayout="row" fxFlex="50" fxLayoutAlign="end center">
                                    <div fxLayoutAlign="end">
                                        <button mat-button matStepperNext (click)="saveProperty()">
                                            Next
                                            <mat-icon>navigate_next</mat-icon>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </mat-step>
                    </mat-horizontal-stepper>
                </div>

            </div>

        </div>

    </div>
</div>